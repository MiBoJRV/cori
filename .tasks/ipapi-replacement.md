# Заміна ipapi.co на альтернативний сервіс для визначення країни

## Поточний стан
У проекті використовується сервіс `https://ipapi.co/json` для автоматичного визначення країни користувача в компоненті `intlTelInput`. Цей сервіс використовується в трьох файлах:
- `scripts/contact-form.js` (рядок 107)
- `scripts/quiz-form.js` (рядок 24) 
- `scripts/survey-form.js` (рядок 28)

## Проблема
Сервіс ipapi.co може мати обмеження по кількості запитів або бути недоступним, що впливає на функціональність автоматичного визначення країни.

## Рекомендовані альтернативи

### 1. IPinfo (Рекомендовано)
- **URL**: `https://ipinfo.io/json`
- **Переваги**: Найпопулярніший сервіс в Україні (34.7% ринку), стабільний, швидкий
- **Обмеження**: Потребує безкоштовний токен (1000 запитів/місяць)
- **Формат відповіді**: `{"country": "UA", ...}`

### 2. ipify (Безкоштовний)
- **URL**: `https://api.ipify.org?format=json`
- **Переваги**: Повністю безкоштовний, не потребує реєстрації
- **Обмеження**: Тільки IP адреса, потрібен додатковий сервіс для геолокації
- **Комбінація**: ipify + ip-api.com для повної геолокації

### 3. IP-API (Безкоштовний)
- **URL**: `http://ip-api.com/json/`
- **Переваги**: Безкоштовний, не потребує токену, повна геолокація
- **Обмеження**: 45 запитів/хвилину
- **Формат відповіді**: `{"countryCode": "UA", ...}`

### 4. GeoJS (Простий)
- **URL**: `https://get.geojs.io/v1/ip/country`
- **Переваги**: Простий API, повертає тільки код країни
- **Обмеження**: Безкоштовний план з обмеженнями

## План реалізації

### Варіант 1: IPinfo (Рекомендований)
1. Зареєструватися на ipinfo.io та отримати безкоштовний токен
2. Оновити функцію `geoIpLookup` у всіх трьох файлах
3. Додати обробку помилок з fallback на країну за замовчуванням

### Варіант 2: IP-API (Безкоштовний)
1. Оновити функцію `geoIpLookup` для використання ip-api.com
2. Змінити обробку відповіді (countryCode замість country)
3. Додати обробку помилок

### Варіант 3: Комбінований підхід
1. Використовувати IPinfo як основний сервіс
2. IP-API як резервний сервіс
3. Країна за замовчуванням як останній fallback

## Файли для зміни
- `scripts/contact-form.js` - функція geoIpLookup (рядок 106-111)
- `scripts/quiz-form.js` - функція geoIpLookup (рядок 23-28)
- `scripts/survey-form.js` - функція geoIpLookup (рядок 27-32)

## Тестування
1. Перевірити роботу автоматичного визначення країни
2. Перевірити fallback при недоступності сервісу
3. Перевірити роботу в різних браузерах
4. Перевірити швидкість завантаження

## Очікуваний результат
Стабільне автоматичне визначення країни користувача без залежності від одного сервісу.
